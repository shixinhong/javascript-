《JavaScript框架设计》

1．框架与库
下面稍微说一下框架与库的区别。
库是解决某个问题而拼凑出来的一大堆函数与类的集合。例如，盖一个房子，需要有测量的方法、砌砖的方法、安装门窗的方法等。每个方法之间都没什么关联。至于怎么盖房子都由自己决定。
框架则是一个半成品的应用，直接给出一个骨架，还例如盖房子，照着图纸砌砖、铺地板与涂漆就行了。在后端Java的三大框架中，程序员基本上就是与XML打交道，用配置就可以处理80%的编程问题。
从上面描述来看，框架带来的便利性无疑比库好许多。但前端JavaScript由于存在一个远程加载的问题，对JavaScript文件的体积限制很大，因此，框架在几年前都不怎么吃香。现在网速快多了，设 […]

2．JavaScript发展历程
第1时期，洪荒时代。从1995年到2005年，就是从JavaScript发明到Ajax概念的提出。其间打了第一场浏览器战争，IE VS Netscape。这两者的DOM API出入很大，前端开发人员被迫改进技术，为了不想兼容某一个浏览器，发明UA（navigator.userAgent）嗅探技术。
这个时期的杰出代表是Bindows，2003年发布，它提供了一个完整的Windows桌面系统，支持能在EXT看到的各种控件，如菜单、树、表格、滑动条、切换卡、弹出层、测量仪表（使用VML实现，现在又支持SVG）。现在版本号是4.x。

其他比较著名的还有Dojo（2004年）、Sarissa（2003年）、JavaScript Remote Scripting（2000年）。
Dojo 有 IBM 做后台，有庞大的开发团队在做，质量有保证，被广泛整合到各大 Java 框架内（struct2、Tapestry、Eclipse ATF、MyFaces）。特点是功能无所不包，主要分为Core、Dijit、DojoX 3大块。Core 提供Ajax、events、packaging、CSS-based querying、animations、JSON 等相关操作API。Dijit 是一个可更换皮肤、基于模板的 Web UI 控件库。 […]

JavaScript Remote Scripting 是较经典的远程脚本访问组件，支持将客户端数据通过服务器做代理进行远程的数据/操作交互。
Sarissa封装了在浏览器端独立调用XML的功能。
第2时期，Prototype“王朝”，2005 年～2008 年。其间打了第2次浏览器战争，交战双方是 IE6、IE7、IE8 VS Firefox 1、Firefox 2、Firefox 3，最后Firefox 3 大胜。浏览器战争中，Prototype积极进行升级，加入诸多 DOM 功能，因此，Jser（JavaScript 程序员）比之前好过多了。加之有 rails、script.aculo. […]

jQuery则以包裹方式来处理DOM，而且配合它的选择器引擎，若一下子选到N个元素，那么就处理 N 个元素，是集化操作，与主流的方式完全不一样。此外，它的方法名都起得很特别，人们一时很难接受。
2007年7月1日，jQuery发布了1.1.3版本，它的宣传是。
（1）速度改良：DOM的遍历比1.1.2版本快了大概800%。
（2）重写了事件系统：对键盘事件用更优雅的方法进行了处理。
（3）重写了effects系统：提高了处理速度。
停滞不前的Prototype已经跟不上时代的节奏，jQuery在1.3x版本时更换Sizzle，更纯净的CSS选择器引擎，易用性与性能大大提高，被程序员一致看好的m […]



3．JavaScript框架分类
如果是从内部架构与理念划分，目前JavaScript框架可以划分为5类。
第1种出现的是以命名空间为导向的类库或框架，如创建一个数组用 new Array()，生成一个对象用new Object()，完全的Java 风格，因此我们就可以以某一对象为根，不断为它添加对象属性或二级对象属性来组织代码，金字塔般地垒叠起来。代表作如早期的YUI与EXT。
第2种出现的是以类工厂为导向的框架，如著名的Prototype，还有mootools、Base2、Ten。它们基本上除了最基本的命名空间，其他模块都是一个由类工厂衍生出来的类对象。尤其是mootoos 1.3把所有类 […]



第4种就是以加载器串联起来的框架，它们都有复数个JavaScript文件，每个JavaScript文件都以固定规则编写。其中最著名的莫过于AMD。模块化是JavaScript走向工业化的标志。《Unix 编程艺术》列举的众多“金科玉律”的第一条就是模块，里面有言——“要编写复杂软件又不至于一败涂地的唯一方法，就是用定义清晰的接口把若干简单模块组合起来，如此一来，多数问题只会出现在局部，那么还有希望对局部进行改进或优化，而不至于牵动全身”。许多企业内部框架都基本采取这种架构，如Dojo、YUI、kissy、qwrap和mass等。
第5种就是具有明确分层构架的 MV*框架。首先是 JavaScr […]



4．JavaScript框架的主要功能
下面先看看主流框架有什么功能。这里面包含jQuery这个自称为库的东西，但它接近9000行，功能比Prototype还齐备。这些框架类库的模块划分主要依据它们在github中的源代码，基本上都是一个模块一个JavaScript文件。
jQuery
jQuery强在它专注于DOM操作的思路一开始就是对的，以后就是不断在兼容性、性能上进行改进。
jQuery 经过多年的发展，拥有庞大的插件与完善的 Bug 提交渠道，因此，可以通过社区的力量不断完善自身。
Prototype.js
早期的王者，它分为4大部分。
语言扩展。
DOM 扩展。
Ajax 部分。
废 […]





即使不专门提供一个类工厂，也应该存在一个名为extend 或mixin 的方法对对象进行扩展。jQuery虽然没有类工厂，但在jQuery UI 中也不得不增加一个，可见其重要性。
自从jQuery出来一个名为noConflict的方法，新兴的框架都带此方法，以求狭缝中生存。
许多框架非常重视Cookie 操作。

最后感谢一下业内一些朋友的帮忙，要不是他们，书不会这么顺利地写出来。以下排名不分先后：玉伯、汤姆大叔、弹窗教主、貘大、linxz 、正则帝 abcd。这些都是专家级人物，在业界早已闻名遐迩。由于本人水平有限，书中难免存有不妥之处，请读者批评指正，源程序和答疑网址：https://github.com/RubyLouvre/jsbook/issues。编辑联系邮箱：zhangtao@ptpress.com.cn。

摘自：《JavaScript框架设计》 — 司徒正美
在豆瓣阅读书店查看：https://read.douban.com/ebook/12387765/
本作品由人民邮电出版社授权豆瓣阅读全球范围内电子版制作与发行。
© 版权所有，侵权必究。